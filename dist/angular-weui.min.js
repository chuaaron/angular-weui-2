!function(){angular.module("ng-weui-actionsheet",[]).directive("weuiActionSheet",["$document",function(e){return{restrict:"E",scope:!0,replace:!0,template:'<div class="ng-weui-action-sheet-backdrop"><div class="weui-actionsheet"><div class="weui-actionsheet__menu"><div class="weui-actionsheet__cell" ng-click="buttonClicked($index)" ng-repeat="b in buttons" ng-class="b.className" ng-bind="b.text"></div><div class="weui-actionsheet__cell" ng-if="destructiveText" ng-click="destructiveButtonClicked()" ng-bind="destructiveText"></div></div><div class="weui-actionsheet__action" ng-if="cancelText"><div class="weui-actionsheet__cell" ng-click="cancel()" ng-bind="cancelText"></div></div></div></div>',link:function(i,n){var t=function(e){27==e.which&&(i.cancel(),i.$apply())},a=function(e){e.target==n[0]&&(i.cancel(),i.$apply())};i.$on("$destroy",function(){n.remove(),e.unbind("keyup",t)}),e.bind("keyup",t),n.bind("click",a)}}}]).provider("weuiActionSheet",function(){var e=this.defaults={buttons:[],buttonClicked:angular.noop,cancelText:"取消",cancel:angular.noop};this.$get=["$document","$templateCache","$compile","$q","$http","$rootScope","$timeout","$window","$controller","$injector",function(i,n,t,a,c,l,o,s,r,u){var d=angular.element,g=d(document.body),v={show:function(i){var n=l.$new(!0);angular.extend(n,angular.copy(e),i||{});var a=n.element=t("<weui-action-sheet></weui-action-sheet>")(n),c=d(a[0].querySelector(".weui-actionsheet"));return g.append(a),n.showSheet=function(e){n.removed||(a[0].offsetWidth,a.addClass("active"),c.addClass("weui-actionsheet_toggle"))},n.removeSheet=function(e){n.removed||(n.removed=!0,c.removeClass("weui-actionsheet_toggle"),a.removeClass("active"),a.on("transitionend",function(){a.remove(),n.cancel.$scope=a=null,(e||angular.noop)(i.buttons)}))},n.buttonClicked=function(e){i.buttonClicked(e,i.buttons[e])===!0&&n.removeSheet()},n.destructiveButtonClicked=function(){i.destructiveButtonClicked()===!0&&n.removeSheet()},n.cancel=function(){n.removeSheet(i.cancel)},n.showSheet(),n.cancel.$scope=n,n.cancel}};return v}],this.setDefaults=function(i){angular.extend(e,i)}})}(),function(){angular.module("ng-weui-dialog",[]).directive("weuiDialog",["$document",function(e){return{restrict:"E",scope:!0,replace:!0,template:'<div class="ng-weui-dialog-backdrop"><div class="weui-dialog"><div class="weui-dialog__hd"><strong class="weui-dialog__title" ng-bind="title"></strong></div><div class="weui-dialog__bd" ng-bind="text"></div><div class="weui-dialog__ft"><a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_default" ng-if="cancelText" ng-click="cancel()" ng-bind="cancelText"></a><a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_primary" ng-click="confirm()" ng-bind="confirmText"></a></div></div></div>',link:function(i,n){var t=function(e){27==e.which&&(i.cancel(),i.$apply())},a=function(e){e.target==n[0]&&(i.cancel(),i.$apply())};i.$on("$destroy",function(){n.remove(),e.unbind("keyup",t)}),e.bind("keyup",t),n.bind("click",a)}}}]).provider("weuiDialog",function(){var e=this.defaults={className:void 0,title:void 0,text:void 0,bodyClassName:"ng-weui-dialog-open",cancelText:"取消",cancel:angular.noop,confirmText:"确定",confirm:angular.noop};this.$get=["$document","$templateCache","$compile","$q","$http","$rootScope","$timeout","$window","$controller","$injector",function(i,n,t,a,c,l,o,s,r,u){var d=angular.element,g=d(document.body),v={open:function(i){var n=l.$new(!0);angular.extend(n,angular.copy(e),i||{});var a=n.element=t("<weui-dialog></weui-dialog>")(n);return g.addClass(n.bodyClassName).append(a),n.showDialog=function(e){n.removed||(a[0].offsetWidth,a.addClass("active"))},n.removeDialog=function(e){n.removed||(n.removed=!0,a.removeClass("active"),a.on("transitionend",function(){a.remove(),n.cancel.$scope=a=null,(e||angular.noop)()}))},n.cancel=function(){n.removeDialog(i.cancel)},n.confirm=function(){n.removeDialog(i.confirm)},n.showDialog(),n.cancel.$scope=n,n.cancel}};return v}],this.setDefaults=function(i){angular.extend(e,i)}})}(),function(){angular.module("ng-weui-fileUpload",[]).factory("weuiFileReader",["$q",function(e){var i=function(e,i,n){return function(){n.$apply(function(){i.resolve(e.result)})}},n=function(e,i,n){return function(){n.$apply(function(){i.reject(e.result)})}},t=function(e,t){var a=new FileReader;return a.onload=i(a,e,t),a.onerror=n(a,e,t),a},a=function(i,n){var a=e.defer(),c=t(a,n);return c.readAsDataURL(i),a.promise};return{readAsDataUrl:a}}]).provider("weuiFileOptimization",function(){var e=this.defaults={maxWidth:640,maxHeight:640};this.$get=["$q","$http",function(i,n){var t={dataURItoBlob:function(e){var i;i=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var n=e.split(",")[0].split(":")[1].split(";")[0],t=new Uint8Array(i.length),a=0;a<i.length;a++)t[a]=i.charCodeAt(a);return new Blob([t],{type:n})},resizeFile:function(n,a){var c=i.defer(),l=document.createElement("img"),a=a||{},o=angular.extend(angular.copy(e),a);try{var s=new FileReader;s.onload=function(e){l.src=e.target.result;var i=document.createElement("canvas"),n=i.getContext("2d");n.drawImage(l,0,0);var a=o.maxWidth,s=o.maxHeight,r=l.width,u=l.height;r>u?r>a&&(u*=a/r,r=a):u>s&&(r*=s/u,u=s),i.width=r,i.height=u;var n=i.getContext("2d");n.drawImage(l,0,0,r,u);var d=i.toDataURL("image/jpeg"),g={};g.base64=d,g.blob=t.dataURItoBlob(d),c.resolve(g)},s.readAsDataURL(n)}catch(r){c.resolve(r)}return c.promise}};return{resizeFile:t.resizeFile}}],this.setDefaults=function(i){angular.extend(e,i)}}).directive("weuiFileModel",["$parse","$compile",function(e,i){return{restrict:"A",link:function(n,t,a,c){function l(e){var t=i(e.clone().val(""))(n);e.after(t),e.remove()}var o=e(a.weuiFileModel),s=o.assign;t.bind("change",function(e){n.$apply(function(){s(n,t[0].files[0])}),n.file=(e.srcElement||e.target).files[0],n.$apply(a.fileFn),l(t)})}}}])}(),function(){angular.module("ng-weui-gallery",[]).directive("weuiGallery",["$document",function(e){return{restrict:"E",scope:!0,replace:!0,template:'<div class="weui-gallery"><span class="weui-gallery__img" style="background-image:url({{url}})" ng-click="cancel()"></span><div class="weui-gallery__opr"><a href="javascript:" class="weui-gallery__del" ng-click="delete()"><i class="weui-icon-delete weui-icon_gallery-delete"></i></a></div></div>',link:function(e,i){}}}]).provider("weuiGallery",function(){var e=this.defaults={url:void 0,cancel:angular.noop,"delete":angular.noop};this.$get=["$document","$templateCache","$compile","$q","$http","$rootScope","$timeout","$window","$controller","$injector",function(i,n,t,a,c,l,o,s,r,u){var d=angular.element,g=d(document.body),v={show:function(i){var n=l.$new(!0);angular.extend(n,angular.copy(e),i||{});var a=n.element=t("<weui-gallery></weui-gallery>")(n);return g.append(a),n.show=function(e){n.removed||(a[0].offsetWidth,a.addClass("weui-gallery_toggle"))},n.remove=function(e){n.removed||(n.removed=!0,a.removeClass("weui-gallery_toggle"),a.on("transitionend",function(){a.remove(),n.cancel.$scope=a=null,(e||angular.noop)(i.url)}))},n.cancel=function(){n.remove(i.cancel)},n["delete"]=function(){n.remove(i["delete"])},n.show(),n.cancel.$scope=n,n.cancel}};return v}],this.setDefaults=function(i){angular.extend(e,i)}})}(),function(){angular.module("ng-weui-msg",[]).directive("weuiMsg",function(){return{scope:{type:"@",title:"@",desc:"@",onSuccess:"&",onWarn:"&"},restrict:"E",template:'<div class="weui-msg"><div class="weui-msg__icon-area"><i class="weui-icon_msg" ng-class="cls"></i></div><div class="weui-msg__text-area"><h2 class="weui-msg__title" ng-bind="title"></h2><p class="weui-msg__desc" ng-bind="desc"></p></div><div class="weui-msg__opr-area"><p class="weui-btn-area"><a href="javascript:void(0);" class="weui-btn weui-btn_primary" ng-click="onSuccess()">确定</a><a href="javascript:void(0);" class="weui-btn weui-btn_default" ng-click="onWarn()">取消</a></p></div><div class="weui-msg__extra-area" ng-transclude></div></div>',replace:!0,transclude:!0,link:function(e,i,n,t){e.cls="warn"===n.type?{"weui-icon-warn":!0}:{"weui-icon-success":!0}}}})}(),function(){angular.module("ng-weui-panel",[]).directive("weuiPanel",function(){return{scope:{title:"@",viewMore:"&"},restrict:"AE",template:'<div class="weui-panel weui-panel_access"><div class="weui-panel__hd" ng-if="!!title" ng-bind="title"></div><div class="weui-panel__bd" ng-transclude></div><div class="weui-panel__ft"><a href="javascript:void(0);" class="weui-cell weui-cell_access weui-cell_link" ng-if="show" ng-click="viewMore()"><div class="weui-cell__bd">查看更多</div><span class="weui-cell__ft"></span></a></div></div>',replace:!0,transclude:!0,link:function(e,i,n,t){e.show=!!n.viewMore&&angular.isFunction(e.viewMore)}}}).directive("panelAppmsg",function(){return{scope:{image:"=",title:"=",desc:"="},require:"^?weuiPanel",restrict:"E",template:'<a href="javascript:void(0);" class="weui-media-box weui-media-box_appmsg"><div class="weui-media-box__hd" ng-if="!!image"><img class="weui-media-box__thumb" ng-src="{{image}}" alt=""></div><div class="weui-media-box__bd"><h4 class="weui-media-box__title" ng-bind="title"></h4><p class="weui-media-box__desc" ng-bind="desc"></p></div></a>',replace:!0}}).directive("panelText",function(){return{scope:{image:"=",title:"=",desc:"="},require:"^?weuiPanel",restrict:"E",template:'<div class="weui-media-box weui-media-box_text"><h4 class="weui-media-box__title" ng-bind="title"></h4><p class="weui-media-box__desc" ng-bind="desc"></p><div ng-transclude></div></div>',replace:!0,transclude:!0}}).directive("weuiPanelSm",function(){return{scope:{title:"@"},restrict:"AE",template:'<div class="weui-panel"><div class="weui-panel__hd" ng-if="!!title" ng-bind="title"></div><div class="weui-panel__bd"><div class="weui-media-box weui-media-box_small-appmsg"><div class="weui-cells" ng-transclude></div></div></div></div>',replace:!0,transclude:!0}}).directive("panelAppmsgSm",function(){return{scope:{image:"=",title:"="},require:"^?weuiPanelSm",restrict:"E",template:'<a class="weui-cell weui-cell_access" href="javascript:;"><div class="weui-cell__hd" ng-if="!!image"><img ng-src="{{image}}" alt="" style="width:20px;margin-right:5px;display:block"></div><div class="weui-cell__bd weui-cell_primary"><p ng-bind="title"></p></div><span class="weui-cell__ft"></span></a>',replace:!0}})}(),function(){angular.module("ng-weui-toast",[]).directive("weuiToast",["$document",function(e){return{restrict:"E",scope:!0,replace:!0,template:'<div class="ng-weui-toast-wrapper"><div class="weui-mask_transparent"></div><div class="weui-toast"><i class="weui-icon-success-no-circle weui-icon_toast"></i><p class="weui-toast__content" ng-bind="text"></p></div></div>',link:function(e,i){}}}]).provider("weuiToast",function(){var e=this.defaults={type:"default",timer:1500,text:"已完成",success:angular.noop};this.$get=["$document","$templateCache","$compile","$q","$http","$rootScope","$timeout","$window","$controller","$injector",function(i,n,t,a,c,l,o,s,r,u){var d=angular.element,g=d(document.querySelector("body")),v={show:function(i){var n=l.$new(!0);angular.extend(n,angular.copy(e),i||{});var a=n.element=t("<weui-toast></weui-toast>")(n);"forbidden"==n.type&&a.addClass("ng-weui-toast-forbidden"),g.append(a),n.remove=function(e){o(function(){a.remove(),(e||angular.noop)()},n.timer)},n.cancel=function(){n.remove(i.success)},n.cancel()}};return v}],this.setDefaults=function(i){angular.extend(e,i)}})}(),function(){var e=window.ngWeui||(window.ngWeui={}),i=null!=navigator.userAgent.match(/iPad/i),n=null!=navigator.userAgent.match(/iPhone/i),t=null!=navigator.userAgent.match(/Android/i),a=null!=navigator.userAgent.match(/webOS/i),c=null!=navigator.userAgent.match(/micromessenger/i);e.isIpad=i,e.isIPhone=n,e.isAndroid=t,e.isWebOS=a,e.isWechat=c,e.isMobile=i||n||t||a,e.isPC=!e.isMobile,e.version="v0.0.1",angular.module("ng-weui",["ng-weui-actionsheet","ng-weui-dialog","ng-weui-fileUpload","ng-weui-gallery","ng-weui-msg","ng-weui-panel","ng-weui-toast"])}();