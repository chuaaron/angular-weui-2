!function(){angular.module("ng-weui-actionsheet",[]).provider("weuiActionSheet",function(){var e=this.defaults={buttons:[],buttonClicked:angular.noop,cancelText:"取消",cancel:angular.noop};this.$get=["$document","$templateCache","$compile","$q","$http","$rootScope","$timeout","$window","$controller","$injector",function(i,a,t,n,l,s,c,o,u,r){var d=angular.element,g=d(document.body),v={show:function(i){var a=s.$new(!0);angular.extend(a,angular.copy(e),i||{});var n='<div class="weui-actionsheet" id="ng_weui_actionsheet"><div class="weui-actionsheet__menu"><div class="weui-actionsheet__cell" ng-click="buttonClicked($index)" ng-repeat="b in buttons" ng-class="b.className" ng-bind="b.text"></div><div class="weui-actionsheet__cell" ng-if="destructiveText" ng-click="destructiveButtonClicked()" ng-bind="destructiveText"></div></div><div class="weui-actionsheet__action" ng-if="cancelText"><div class="weui-actionsheet__cell" ng-click="cancel()" ng-bind="cancelText"></div></div></div>',l=d(n),c=d("<div class='ng-weui-mask-transition' id='ng_weui_mask_transition'></div>");c.off().on("click",function(){a.cancel()});var o=a.element=t(l)(a);return g.append(o).append(c),a.showSheet=function(e){a.removed||(c.addClass("ng-weui-fade-toggle").css({display:"block"}),l.addClass("weui-actionsheet_toggle"))},a.removeSheet=function(e){a.removed||(a.removed=!0,c.removeClass("ng-weui-fade-toggle").css({display:"none"}),l.removeClass("weui-actionsheet_toggle"),l.on("transitionend",function(){l.remove(),c.remove(),a.cancel.$scope=o=null,(e||angular.noop)(i.buttons)}))},a.buttonClicked=function(e){i.buttonClicked(e,i.buttons[e])===!0&&a.removeSheet()},a.destructiveButtonClicked=function(){i.destructiveButtonClicked()===!0&&a.removeSheet()},a.cancel=function(){a.removeSheet(i.cancel)},a.showSheet(),a.cancel.$scope=a,a.cancel}};return v}],this.setDefaults=function(i){angular.extend(e,i)}})}(),function(){angular.module("ng-weui-dialog",[]).provider("weuiDialog",function(){var e=this.defaults={type:"confirm",className:void 0,title:void 0,text:void 0,buttons:[{text:"取消"},{text:"确定"}],bodyClassName:"ngdialog-open",cancel:angular.noop,confirm:angular.noop};this.$get=["$document","$templateCache","$compile","$q","$http","$rootScope","$timeout","$window","$controller","$injector",function(i,a,t,n,l,s,c,o,u,r){var d=angular.element,g=d(document.body),v={dialogId:0,closeDialog:function(e,i){var a=d(e.target),t=i.data("$ngDialogOptions"),n=a.hasClass("weui-mask"),l=a.hasClass("weui-dialog__btn");(n||l)&&(g.removeClass(t.bodyClassName),i.remove(),angular.isFunction(t.cancel)&&(n||a.attr("data-cancel"))&&t.cancel(),angular.isFunction(t.confirm)&&a.attr("data-confirm")&&t.confirm())}},p={open:function(i){var a,i=i||{},t=angular.extend(angular.copy(e),i),n=t.buttons[0].text,l=t.buttons[1].text;return"confirm"==t.type&&(a=d('<div class="weui_dialog_confirm"><div class="weui-mask"></div><div class="weui-dialog"><div class="weui-dialog__hd"><strong class="weui-dialog__title">'+t.title+'</strong></div><div class="weui-dialog__bd">'+t.text+'</div><div class="weui-dialog__ft"><a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_default" data-cancel="2016">'+n+'</a><a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_primary" data-confirm="2016">'+l+"</a></div></div></div>")),"alert"==t.type&&(a=d('<div class="weui_dialog_alert"><div class="weui-mask"></div><div class="weui-dialog"><div class="weui-dialog__hd"><strong class="weui-dialog__title">'+t.title+'</strong></div><div class="weui-dialog__bd">'+t.text+'</div><div class="weui-dialog__ft"><a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_primary" data-confirm="2016">'+l+"</a></div></div></div>")),a.data("$ngDialogOptions",t),g.addClass(t.bodyClassName).append(a),t.className&&a.addClass(t.className),a.attr({id:"weui-dialog_"+ ++v.dialogId}),a.on("click",function(e){v.closeDialog(e,a)}),p},close:function(){var e=document.getElementById("weui-dialog_"+v.dialogId),i=d(e);e&&(g.removeClass("weuiDialog-open"),i.remove())},getDefaults:function(){return e}};return p}],this.setDefaults=function(i){angular.extend(e,i)}})}(),function(){angular.module("ng-weui-fileUpload",[]).factory("weuiFileReader",["$q",function(e){var i=function(e,i,a){return function(){a.$apply(function(){i.resolve(e.result)})}},a=function(e,i,a){return function(){a.$apply(function(){i.reject(e.result)})}},t=function(e,t){var n=new FileReader;return n.onload=i(n,e,t),n.onerror=a(n,e,t),n},n=function(i,a){var n=e.defer(),l=t(n,a);return l.readAsDataURL(i),n.promise};return{readAsDataUrl:n}}]).provider("weuiFileOptimization",function(){var e=this.defaults={maxWidth:640,maxHeight:640};this.$get=["$q","$http",function(i,a){var t={dataURItoBlob:function(e){var i;i=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var a=e.split(",")[0].split(":")[1].split(";")[0],t=new Uint8Array(i.length),n=0;n<i.length;n++)t[n]=i.charCodeAt(n);return new Blob([t],{type:a})},resizeFile:function(a,n){var l=i.defer(),s=document.createElement("img"),n=n||{},c=angular.extend(angular.copy(e),n);try{var o=new FileReader;o.onload=function(e){s.src=e.target.result;var i=document.createElement("canvas"),a=i.getContext("2d");a.drawImage(s,0,0);var n=c.maxWidth,o=c.maxHeight,u=s.width,r=s.height;u>r?u>n&&(r*=n/u,u=n):r>o&&(u*=o/r,r=o),i.width=u,i.height=r;var a=i.getContext("2d");a.drawImage(s,0,0,u,r);var d=i.toDataURL("image/jpeg"),g={};g.base64=d,g.blob=t.dataURItoBlob(d),l.resolve(g)},o.readAsDataURL(a)}catch(u){l.resolve(u)}return l.promise}};return{resizeFile:t.resizeFile}}],this.setDefaults=function(i){angular.extend(e,i)}}).directive("weuiFileModel",["$parse",function(e){return{restrict:"A",link:function(i,a,t,n){var l=e(t.weuiFileModel),s=l.assign;a.bind("change",function(e){i.$apply(function(){s(i,a[0].files[0])}),i.file=(e.srcElement||e.target).files[0],i.$apply(t.fileFn)})}}}])}(),function(){angular.module("ng-weui-gallery",[]).provider("weuiGallery",function(){var e=this.defaults={url:void 0,cancel:angular.noop,"delete":angular.noop};this.$get=["$document","$templateCache","$compile","$q","$http","$rootScope","$timeout","$window","$controller","$injector",function(i,a,t,n,l,s,c,o,u,r){var d=angular.element,g=d(document.body),v={show:function(i){var a=s.$new(!0);angular.extend(a,angular.copy(e),i||{});var n='<div class="weui-gallery"><span class="weui-gallery__img" style="background-image:url({{url}})" ng-click="cancel()"></span><div class="weui-gallery__opr"><a href="javascript:" class="weui-gallery__del" ng-click="delete()"><i class="weui-icon-delete weui-icon_gallery-delete"></i></a></div></div>',l=a.element=t(n)(a);return g.append(l),a.show=function(e){a.removed||l.addClass("weui-gallery_toggle")},a.remove=function(e){a.removed||(a.removed=!0,l.removeClass("weui-gallery_toggle"),l.on("transitionend",function(){l.remove(),a.cancel.$scope=l=null,(e||angular.noop)(i.url)}))},a.cancel=function(){a.remove(i.cancel)},a["delete"]=function(){a.remove(i["delete"])},a.show(),a.cancel.$scope=a,a.cancel}};return v}],this.setDefaults=function(i){angular.extend(e,i)}})}(),function(){angular.module("ng-weui-msg",[]).directive("weuiMsg",function(){return{scope:{type:"@",title:"@",desc:"@",onSuccess:"&",onWarn:"&"},restrict:"E",template:'<div class="weui-msg"><div class="weui-msg__icon-area"><i class="weui-icon_msg" ng-class="cls"></i></div><div class="weui-msg__text-area"><h2 class="weui-msg__title">{{title}}</h2><p class="weui-msg__desc">{{desc}}</p></div><div class="weui-msg__opr-area"><p class="weui-btn-area"><a href="javascript:void(0);" class="weui-btn weui-btn_primary" ng-click="onSuccess()">确定</a><a href="javascript:void(0);" class="weui-btn weui-btn_default" ng-click="onWarn()">取消</a></p></div><div class="weui-msg__extra-area" ng-transclude></div></div>',replace:!0,transclude:!0,link:function(e,i,a,t){e.cls="warn"===a.type?{"weui-icon-warn":!0}:{"weui-icon-success":!0}}}})}(),function(){angular.module("ng-weui-panel",[]).directive("weuiPanel",function(){return{scope:{title:"@",viewMore:"&"},restrict:"AE",template:'<div class="weui-panel weui-panel_access"><div class="weui-panel__hd" ng-if="!!title">{{title}}</div><div class="weui-panel__bd" ng-transclude></div><div class="weui-panel__ft"><a href="javascript:void(0);" class="weui-cell weui-cell_access weui-cell_link" ng-if="show" ng-click="viewMore()"><div class="weui-cell__bd">查看更多</div><span class="weui-cell__ft"></span></a></div></div>',replace:!0,transclude:!0,link:function(e,i,a,t){e.show=!!a.viewMore&&angular.isFunction(e.viewMore)}}}).directive("panelAppmsg",function(){return{scope:{image:"=",title:"=",desc:"="},require:"^?weuiPanel",restrict:"E",template:'<a href="javascript:void(0);" class="weui-media-box weui-media-box_appmsg"><div class="weui-media-box__hd" ng-if="!!image"><img class="weui-media-box__thumb" ng-src="{{image}}" alt=""></div><div class="weui-media-box__bd"><h4 class="weui-media-box__title">{{title}}</h4><p class="weui-media-box__desc">{{desc}}</p></div></a>',replace:!0}}).directive("panelText",function(){return{scope:{image:"=",title:"=",desc:"="},require:"^?weuiPanel",restrict:"E",template:'<div class="weui-media-box weui-media-box_text"><h4 class="weui-media-box__title">{{title}}</h4><p class="weui-media-box__desc">{{desc}}</p><div ng-transclude></div></div>',replace:!0,transclude:!0}}).directive("weuiPanelSm",function(){return{scope:{title:"@"},restrict:"AE",template:'<div class="weui-panel"><div class="weui-panel__hd" ng-if="!!title">{{title}}</div><div class="weui-panel__bd"><div class="weui-media-box weui-media-box_small-appmsg"><div class="weui-cells" ng-transclude></div></div></div></div>',replace:!0,transclude:!0}}).directive("panelAppmsgSm",function(){return{scope:{image:"=",title:"="},require:"^?weuiPanelSm",restrict:"E",template:'<a class="weui-cell weui-cell_access" href="javascript:;"><div class="weui-cell__hd" ng-if="!!image"><img ng-src="{{image}}" alt="" style="width:20px;margin-right:5px;display:block"></div><div class="weui-cell__bd weui-cell_primary"><p>{{title}}</p></div><span class="weui-cell__ft"></span></a>',replace:!0}})}(),function(){angular.module("ng-weui-toast",[]).provider("weuiToast",function(){var e=this.defaults={type:"default",timer:1500,text:"已完成",success:angular.noop};this.$get=["$document","$templateCache","$compile","$q","$http","$rootScope","$timeout","$window","$controller","$injector",function(i,a,t,n,l,s,c,o,u,r){var d=angular.element,g=d(document.querySelector("body")),v={close:function(e){var i=e.data("$ngToastOptions");c(function(){e.remove(),angular.isFunction(i.success)&&i.success()},i.timer)}},p={message:function(i){var a,i=i||{},t=angular.extend(angular.copy(e),i);return a=d('<div id="toast"><div class="weui-mask_transparent"></div><div class="weui-toast"><i class="weui-icon-success-no-circle weui-icon_toast"></i><p class="weui-toast__content">'+t.text+"</p></div></div>"),"forbidden"==t.type&&a.addClass("ng-weui-toast-forbidden"),a.data("$ngToastOptions",t),g.append(a),v.close(a),p}};return p}],this.setDefaults=function(i){angular.extend(e,i)}})}(),function(){var e=window.ngWeui||(window.ngWeui={}),i=null!=navigator.userAgent.match(/iPad/i),a=null!=navigator.userAgent.match(/iPhone/i),t=null!=navigator.userAgent.match(/Android/i),n=null!=navigator.userAgent.match(/webOS/i),l=null!=navigator.userAgent.match(/micromessenger/i);e.isIpad=i,e.isIPhone=a,e.isAndroid=t,e.isWebOS=n,e.isWechat=l,e.isMobile=i||a||t||n,e.isPC=!e.isMobile,e.version="v0.0.1",angular.module("ng-weui",["ng-weui-actionsheet","ng-weui-dialog","ng-weui-fileUpload","ng-weui-gallery","ng-weui-msg","ng-weui-panel","ng-weui-toast"])}();