function Events(){}function triggerEvents(e,t,n){var i=!0;if(e){var a=0,o=e.length,r=t[0],s=t[1],l=t[2];switch(t.length){case 0:for(;a<o;a+=2)i=e[a].call(e[a+1]||n)!==!1&&i;break;case 1:for(;a<o;a+=2)i=e[a].call(e[a+1]||n,r)!==!1&&i;break;case 2:for(;a<o;a+=2)i=e[a].call(e[a+1]||n,r,s)!==!1&&i;break;case 3:for(;a<o;a+=2)i=e[a].call(e[a+1]||n,r,s,l)!==!1&&i;break;default:for(;a<o;a+=2)i=e[a].apply(e[a+1]||n,t)!==!1&&i}}return i}function isFunction(e){return"[object Function]"===Object.prototype.toString.call(e)}function getStyle(e,t){return window.getComputedStyle(e,null).getPropertyValue(t)}!function(){angular.module("ng-weui-actionsheet",[]).directive("weuiActionSheet",["$document",function(e){return{restrict:"E",scope:!0,replace:!0,template:'<div class="ng-weui-action-sheet-backdrop"><div class="weui-actionsheet"><div class="weui-actionsheet__menu"><div class="weui-actionsheet__cell action-sheet-title" ng-if="titleText" ng-bind="titleText"></div><div class="weui-actionsheet__cell" ng-click="buttonClicked($index)" ng-repeat="b in buttons" ng-class="b.className" ng-bind="b.text"></div><div class="weui-actionsheet__cell destructive action-sheet-destructive" ng-if="destructiveText" ng-click="destructiveButtonClicked()" ng-bind="destructiveText"></div></div><div class="weui-actionsheet__action" ng-if="cancelText"><div class="weui-actionsheet__cell" ng-click="cancel()" ng-bind="cancelText"></div></div></div></div>',link:function(t,n){var i=function(e){27==e.which&&(t.cancel(),t.$apply())},a=function(e){e.target==n[0]&&(t.cancel(),t.$apply())};t.$on("$destroy",function(){n.remove(),e.unbind("keyup",i)}),e.bind("keyup",i),n.bind("click",a)}}}]).provider("$weuiActionSheet",function(){var e=this.defaults={titleText:void 0,buttons:[],buttonClicked:angular.noop,cancelText:"取消",cancel:angular.noop,cancelOnStateChange:!0};this.$get=["$document","$templateCache","$compile","$q","$http","$rootScope","$timeout","$window","$controller","$injector",function(t,n,i,a,o,r,s,l,c,u){var d=angular.element,p=d(document.body),v=angular.extend,g=angular.noop,f=angular.copy,h={show:function(t){var n=r.$new(!0);v(n,f(e),t||{});var a=n.element=i("<weui-action-sheet></weui-action-sheet>")(n),o=d(a[0].querySelector(".weui-actionsheet")),s=n.cancelOnStateChange?r.$on("$stateChangeSuccess",function(){n.cancel()}):g;return p.append(a),n.showSheet=function(e){n.removed||(a[0].offsetWidth,a.addClass("active"),o.addClass("weui-actionsheet_toggle"))},n.removeSheet=function(e){n.removed||(n.removed=!0,o.removeClass("weui-actionsheet_toggle"),a.removeClass("active"),s(),a.on("transitionend",function(){a.remove(),n.cancel.$scope=a=null,(e||g)(t.buttons)}))},n.buttonClicked=function(e){t.buttonClicked(e,t.buttons[e])===!0&&n.removeSheet()},n.destructiveButtonClicked=function(){t.destructiveButtonClicked()===!0&&n.removeSheet()},n.cancel=function(){n.removeSheet(t.cancel)},n.showSheet(),n.cancel.$scope=n,n.cancel}};return h}],this.setDefaults=function(t){angular.extend(e,t)}})}(),function(){angular.module("ng-weui-backdrop",[]).provider("$weuiBackdrop",function(){this.$get=["$document","$timeout","$$rAF","$rootScope",function(e,t,n,i){var a=angular.element,o=a(document.body),r=(angular.extend,angular.noop,angular.copy,{backdropHolds:0,_el:a('<div class="weui-mask hidden"></div>'),_init:function(){o.append(r._el)}}),s={getElement:function(){return r._el},retain:function(){r.backdropHolds++,1===r.backdropHolds&&(r._el.addClass("visible"),i.$broadcast("backdrop.shown"),n(function(){r.backdropHolds>=1&&r._el.addClass("active")}))},release:function(){1===r.backdropHolds&&(r._el.removeClass("active"),i.$broadcast("backdrop.hidden"),t(function(){0===r.backdropHolds&&r._el.removeClass("visible")},400,!1)),r.backdropHolds=Math.max(0,r.backdropHolds-1)}};return r._init(),s}]})}();var eventSplitter=/\s+/;Events.prototype.on=function(e,t,n){var i,a,o;if(!t)return this;for(i=this.__events||(this.__events={}),e=e.split(eventSplitter);a=e.shift();)o=i[a]||(i[a]=[]),o.push(t,n);return this},Events.prototype.once=function(e,t,n){var i=this,a=function o(){i.off(e,o),t.apply(n||i,arguments)};return this.on(e,a,n)},Events.prototype.off=function(e,t,n){var i,a,o,r;if(!(i=this.__events))return this;if(!(e||t||n))return delete this.__events,this;for(e=e?e.split(eventSplitter):keys(i);a=e.shift();)if(o=i[a])if(t||n)for(r=o.length-2;r>=0;r-=2)t&&o[r]!==t||n&&o[r+1]!==n||o.splice(r,2);else delete i[a];return this},Events.prototype.trigger=function(e){var t,n,i,a,o,r,s=[],l=!0;if(!(t=this.__events))return this;for(e=e.split(eventSplitter),o=1,r=arguments.length;o<r;o++)s[o-1]=arguments[o];for(;n=e.shift();)(i=t.all)&&(i=i.slice()),(a=t[n])&&(a=a.slice()),"all"!==n&&(l=triggerEvents(a,s,this)&&l),l=triggerEvents(i,[n].concat(s),this)&&l;return l},Events.prototype.emit=Events.prototype.trigger;var keys=Object.keys;keys||(keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),Events.mixTo=function(e){function t(t){e[t]=function(){return n[t].apply(a,Array.prototype.slice.call(arguments)),this}}var n=Events.prototype;if(isFunction(e))for(var i in n)n.hasOwnProperty(i)&&(e.prototype[i]=n[i]);else{var a=new Events;for(var i in n)n.hasOwnProperty(i)&&t(i)}};var randomID=function(){return"_"+Math.random().toString(36).substr(2,9)},SVG={svgns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",createElement:function(e,t){var n=document.createElementNS(SVG.svgns,e);return t&&SVG.setAttr(n,t),n},setAttr:function(e,t){for(var n in t)"href"===n?e.setAttributeNS(SVG.xlink,n,t[n]):e.setAttribute(n,t[n]);return e}},Blur=function e(t,n){this.internalID=randomID(),this.element=t,this.width=t.offsetWidth,this.height=t.offsetHeight,this.element=t,this.parent=this.element.parentNode,this.options=Object.assign({},e.DEFAULTS,n),this.overlayEl=this.createOverlay(),this.blurredImage=null,this.attachListeners(),this.generateBlurredImage(this.options.url)};Blur.VERSION="0.0.1",Events.mixTo(Blur),Blur.DEFAULTS={url:"",blurAmount:10,imageClass:"",overlayClass:"",duration:!1,opacity:1},Blur.prototype.setBlurAmount=function(e){this.options.blurAmount=e},Blur.prototype.attachListeners=function(){this.on("weui.blur.loaded",this.fadeIn.bind(this)),this.on("weui.blur.unload",this.fadeOut.bind(this))},Blur.prototype.fadeIn=function(){},Blur.prototype.fadeOut=function(){},Blur.prototype.generateBlurredImage=function(e){var t=this.blurredImage;this.internalID=randomID(),t&&t.parentNode.removeChild(t),this.blurredImage=this.createSVG(e,this.width,this.height)},Blur.prototype.createOverlay=function(){if(this.options.overlayClass&&""!==this.options.overlayClass){var e=document.createElement("div");return e.classList.add(this.options.overlayClass),this.parent.insertBefore(e,this.element),e}return!1},Blur.prototype.createSVG=function(e,t,n){var i=this,a=SVG.createElement("svg",{xmlns:SVG.svgns,version:"1.1",width:t,height:n,id:"blurred"+this.internalID,"class":this.options.imageClass,viewBox:"0 0 "+t+" "+n,preserveAspectRatio:"none"}),o="blur"+this.internalID,r=SVG.createElement("filter",{id:o}),s=SVG.createElement("feGaussianBlur",{"in":"SourceGraphic",stdDeviation:this.options.blurAmount}),l=SVG.createElement("image",{x:0,y:0,width:t,height:n,externalResourcesRequired:"true",href:e,style:"filter:url(#"+o+")",preserveAspectRatio:"none"});return l.addEventListener("load",function(){i.emit("weui.blur.loaded")},!0),l.addEventListener("SVGLoad",function(){i.emit("weui.blur.loaded")},!0),r.appendChild(s),a.appendChild(r),a.appendChild(l),i.options.duration&&i.options.duration>0&&(a.style.opacity=0,window.setTimeout(function(){"0"===getStyle(a,"opacity")&&(a.style.opacity=1)},this.options.duration+100)),this.element.insertBefore(a,this.element.firstChild),a},Blur.prototype.createIMG=function(e,t,n){var i=this,a=this.prependImage(e),o=2*this.options.blurAmount>100?100:2*this.options.blurAmount,r={filter:"progid:DXImageTransform.Microsoft.Blur(pixelradius="+o+") ",top:2.5*-this.options.blurAmount,left:2.5*-this.options.blurAmount,width:t+2.5*this.options.blurAmount,height:n+2.5*this.options.blurAmount};for(var s in r)a.style[s]=r[s];return a.setAttribute("id",this.internalID),a.onload=function(){i.trigger("weui.blur.loaded")},this.options.duration&&this.options.duration>0&&window.setTimeout(function(){"0"===getStyle(a,"opacity")&&(a.style.opacity=1)},this.options.duration+100),a},Blur.prototype.prependImage=function(e){var t=document.createElement("img");return t.url=e,t.setAttribute("id",this.internalID),t.classList.add(this.options.imageClass),this.overlayEl?this.parent.insertBefore(t,this.overlayEl):this.parent.insertBefore(t,this.parent.firstChild),t},function(){angular.module("ng-weui-blur",[]).directive("weuiBlur",["$rootScope",function(e){return{restrict:"E",scope:{url:"@",blurAmount:"@",imageClass:"@",overlayClass:"@",duration:"@",opacity:"@"},template:"<div ng-transclude></div>",replace:!0,transclude:!0,link:function(t,n,i,a){var o=new Blur(n[0],{url:t.url,blurAmount:Number(t.blurAmount)||10,imageClass:t.imageClass||"weui-bg-blur",overlayClass:t.overlayClass||"weui-bg-overlay",duration:Number(t.duration)||100,opacity:Number(t.opacity)||1});e.$emit("weui-blur",o)}}}])}(),function(){angular.module("ng-weui-dialog",[]).directive("weuiDialog",["$document",function(e){return{restrict:"E",scope:!0,replace:!0,template:'<div class="ng-weui-dialog-wrapper hidden"><div class="weui-dialog"><div class="weui-dialog__hd"><strong class="weui-dialog__title" ng-bind="title"></strong></div><div class="weui-dialog__bd" ng-bind="text"></div><div class="weui-dialog__ft"><a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_default" ng-if="cancelText" ng-click="cancel()" ng-bind="cancelText"></a><a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_primary" ng-click="confirm()" ng-bind="confirmText"></a></div></div></div>',link:function(t,n){var i=function(e){27==e.which&&(t.cancel(),t.$apply())};t.$on("$destroy",function(){n.remove(),e.unbind("keyup",i)}),e.bind("keyup",i)}}}]).provider("$weuiDialog",function(){var e=this.defaults={className:void 0,title:void 0,text:void 0,bodyClassName:"ng-weui-dialog-open",cancelText:"取消",cancel:angular.noop,confirmText:"确定",confirm:angular.noop};this.$get=["$document","$templateCache","$compile","$q","$http","$rootScope","$timeout","$window","$controller","$weuiBackdrop",function(t,n,i,a,o,r,s,l,c,u){var d=angular.element,p=d(document.body),v=angular.extend,g=angular.noop,f=angular.copy,h={open:function(t){var n=r.$new(!0);v(n,f(e),t||{});var a=n.element=i("<weui-dialog></weui-dialog>")(n);return p.addClass(n.bodyClassName).append(a),n.showDialog=function(e){if(!n.removed){u.retain();var t=u.getElement();t.addClass("backdrop-dialog"),t.off().on("click",function(e){t.hasClass("backdrop-dialog")&&n.cancel()}),a.addClass("visible"),a[0].offsetWidth,a.addClass("active")}},n.removeDialog=function(e){n.removed||(n.removed=!0,u.release(),u.getElement().removeClass("backdrop-dialog"),a.removeClass("active"),a.on("transitionend",function(){a.remove(),n.$destroy(),n.cancel.$scope=a=null,(e||g)()}))},n.cancel=function(){n.removeDialog(t.cancel)},n.confirm=function(){n.removeDialog(t.confirm)},n.showDialog(),n.cancel.$scope=n,n.cancel}};return h}],this.setDefaults=function(t){angular.extend(e,t)}})}(),function(){angular.module("ng-weui-fileUpload",[]).factory("$weuiFileReader",["$q",function(e){var t=function(e,t,n){return function(){n.$apply(function(){t.resolve(e.result)})}},n=function(e,t,n){return function(){n.$apply(function(){t.reject(e.result)})}},i=function(e,i){var a=new FileReader;return a.onload=t(a,e,i),a.onerror=n(a,e,i),a},a=function(t,n){var a=e.defer(),o=i(a,n);return o.readAsDataURL(t),a.promise};return{readAsDataUrl:a}}]).provider("$weuiFileOptimization",function(){var e=this.defaults={maxWidth:640,maxHeight:640};this.$get=["$q","$http",function(t,n){var i={dataURItoBlob:function(e){var t;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var n=e.split(",")[0].split(":")[1].split(";")[0],i=new Uint8Array(t.length),a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return new Blob([i],{type:n})},resizeFile:function(n,a){var o=t.defer(),r=document.createElement("img"),a=a||{},s=angular.extend(angular.copy(e),a);try{var l=new FileReader;l.onload=function(e){r.src=e.target.result;var t=document.createElement("canvas"),n=t.getContext("2d");n.drawImage(r,0,0);var a=s.maxWidth,l=s.maxHeight,c=r.width,u=r.height;c>u?c>a&&(u*=a/c,c=a):u>l&&(c*=l/u,u=l),t.width=c,t.height=u;var n=t.getContext("2d");n.drawImage(r,0,0,c,u);var d=t.toDataURL("image/jpeg"),p={};p.base64=d,p.blob=i.dataURItoBlob(d),o.resolve(p)},l.readAsDataURL(n)}catch(c){o.resolve(c)}return o.promise}};return{resizeFile:i.resizeFile}}],this.setDefaults=function(t){angular.extend(e,t)}}).directive("weuiFileModel",["$parse","$compile",function(e,t){return{restrict:"A",link:function(n,i,a,o){function r(e){var i=t(e.clone().val(""))(n);e.after(i),e.remove()}var s=e(a.weuiFileModel),l=s.assign;i.bind("change",function(e){n.$apply(function(){l(n,i[0].files[0])}),n.file=(e.srcElement||e.target).files[0],n.$apply(a.fileFn),r(i)})}}}])}(),function(){angular.module("ng-weui-gallery",[]).provider("$weuiGallery",function(){var e=this.defaults={urls:[],index:0,cancel:angular.noop,"delete":angular.noop,animation:"fade-in"};this.$get=["$document","$templateCache","$compile","$q","$http","$rootScope","$timeout","$window","$controller","$injector",function(t,n,i,a,o,r,s,l,c,u){var d=angular.element,p=d(document.body),v=angular.extend,g=angular.noop,f=angular.copy,h={show:function(t){var n=r.$new(!0);v(n,f(e),t||{});var a=n.element=i('<weui-slide-box show-pager="false" active-slide="index" class="weui-gallery-wrapper"><weui-slide ng-repeat="item in urls track by $index"><div class="weui-gallery"><span class="weui-gallery__img" style="background-image:url({{item}})" ng-click="cancel()"></span><div class="weui-gallery__opr"><a href="javascript:" class="weui-gallery__del" ng-click="delete($index)"><i class="weui-icon-delete weui-icon_gallery-delete"></i></a></div></div></<weui-slide></weui-slide-box>')(n);return a.addClass(n.animation),p.append(a),n.show=function(e){n.removed||(a.addClass("ng-enter active").removeClass("ng-leave ng-leave-active"),a[0].offsetWidth,a.addClass("ng-enter-active"))},n.remove=function(e){n.removed||(n.removed=!0,a.addClass("ng-leave ng-leave-active").removeClass("ng-enter ng-enter-active active"),a.on("transitionend",function(){a.remove(),n.cancel.$scope=a=null,(e||g)(t.urls)}))},n.cancel=function(){n.remove(t.cancel)},n["delete"]=function(e){t["delete"](e,t.urls[e])===!0&&n.remove()},n.show(),n.cancel.$scope=n,n.cancel}};return h}],this.setDefaults=function(t){angular.extend(e,t)}})}(),function(){angular.module("ng-weui-icon",[]).directive("weuiIcon",function(){return{restrict:"E",template:"<i></i>",replace:!0,link:function(e,t,n,i){var a=n.icon||"success";t.addClass("weui-icon-"+a)}}})}(),function(){angular.module("ng-weui-loading",[]).directive("weuiLoading",["$document",function(e){return{restrict:"E",scope:!0,replace:!0,template:'<div class="ng-weui-loading-wrapper hidden"><div class="weui-toast"><i class="weui-loading weui-icon_toast"></i><p class="weui-toast__content"></p></div></div>',link:function(e,t){}}}]).provider("$weuiLoading",function(){var e=this.defaults={template:"数据加载中",templateUrl:null,noBackdrop:!0,hideOnStateChange:!1};this.$get=["$document","$weuiTemplateLoader","$compile","$q","$http","$rootScope","$timeout","$window","$controller","$weuiBackdrop",function(t,n,i,a,o,r,s,l,c,u){var d=angular.element,p=d(document.body),v=angular.extend,g=(angular.noop,angular.copy),f={instance:null,getLoader:function(){return f.instance||(f.instance=n.compile({template:"<weui-loading></weui-loading>",appendTo:p}).then(function(e){return e.show=function(t){var o=t.templateUrl?n.load(t.templateUrl):a.when(t.template||t.content||"");e.scope=t.scope||e.scope,e.isShown||(e.hasBackdrop=!t.noBackdrop,e.hasBackdrop&&(u.retain(),u.getElement().addClass("backdrop-loading"))),o.then(function(t){if(t){var n=d(e.element[0].querySelector(".weui-toast__content"));n.html(t),i(n.contents())(e.scope)}e.isShown&&(e.element.addClass("visible"),e.element[0].offsetWidth,e.element.addClass("active"),p.addClass("ng-weui-loading-active"))}),e.isShown=!0},e.hide=function(){e.isShown&&(e.hasBackdrop&&(u.release(),u.getElement().removeClass("backdrop-loading")),e.element.removeClass("active"),p.removeClass("ng-weui-loading-active"),e.element.removeClass("visible")),e.isShown=!1;var t=d(e.element[0].querySelector(".weui-toast__content"));t.html("")},e})),f.instance}},h={show:function(t){var n=v(g(e),t);return n.hideOnStateChange&&(r.$on("$stateChangeSuccess",h.hide),r.$on("$stateChangeError",h.hide)),f.getLoader().then(function(e){return e.show(n)})},hide:function(){return f.getLoader().then(function(e){return e.hide()})}};return h}],this.setDefaults=function(t){angular.extend(e,t)}})}(),function(){angular.module("ng-weui-msg",[]).directive("weuiMsg",function(){return{scope:{type:"@",title:"@",desc:"@",onSuccess:"&",onWarn:"&"},restrict:"E",template:'<div class="weui-msg"><div class="weui-msg__icon-area"><i class="weui-icon_msg" ng-class="cls"></i></div><div class="weui-msg__text-area"><h2 class="weui-msg__title" ng-bind="title"></h2><p class="weui-msg__desc" ng-bind="desc"></p></div><div class="weui-msg__opr-area"><p class="weui-btn-area"><a href="javascript:void(0);" class="weui-btn weui-btn_primary" ng-click="onSuccess()">确定</a><a href="javascript:void(0);" class="weui-btn weui-btn_default" ng-click="onWarn()">取消</a></p></div><div class="weui-msg__extra-area" ng-transclude></div></div>',replace:!0,transclude:!0,link:function(e,t,n,i){e.cls="warn"===n.type?{"weui-icon-warn":!0}:{"weui-icon-success":!0}}}})}(),function(){angular.module("ng-weui-panel",[]).directive("weuiPanel",function(){return{scope:{title:"@",viewMore:"&"},restrict:"AE",template:'<div class="weui-panel weui-panel_access"><div class="weui-panel__hd" ng-if="!!title" ng-bind="title"></div><div class="weui-panel__bd" ng-transclude></div><div class="weui-panel__ft"><a href="javascript:void(0);" class="weui-cell weui-cell_access weui-cell_link" ng-if="show" ng-click="viewMore()"><div class="weui-cell__bd">查看更多</div><span class="weui-cell__ft"></span></a></div></div>',replace:!0,transclude:!0,link:function(e,t,n,i){e.show=!!n.viewMore&&angular.isFunction(e.viewMore)}}}).directive("panelAppmsg",function(){return{scope:{image:"=",title:"=",desc:"="},require:"^?weuiPanel",restrict:"E",template:'<a href="javascript:void(0);" class="weui-media-box weui-media-box_appmsg"><div class="weui-media-box__hd" ng-if="!!image"><img class="weui-media-box__thumb" ng-src="{{image}}" alt=""></div><div class="weui-media-box__bd"><h4 class="weui-media-box__title" ng-bind="title"></h4><p class="weui-media-box__desc" ng-bind="desc"></p></div></a>',replace:!0}}).directive("panelText",function(){return{scope:{image:"=",title:"=",desc:"="},require:"^?weuiPanel",restrict:"E",template:'<div class="weui-media-box weui-media-box_text"><h4 class="weui-media-box__title" ng-bind="title"></h4><p class="weui-media-box__desc" ng-bind="desc"></p><div ng-transclude></div></div>',replace:!0,transclude:!0}}).directive("weuiPanelSm",function(){return{scope:{title:"@"},restrict:"AE",template:'<div class="weui-panel"><div class="weui-panel__hd" ng-if="!!title" ng-bind="title"></div><div class="weui-panel__bd"><div class="weui-media-box weui-media-box_small-appmsg"><div class="weui-cells" ng-transclude></div></div></div></div>',replace:!0,transclude:!0}}).directive("panelAppmsgSm",function(){return{scope:{image:"=",title:"="},require:"^?weuiPanelSm",restrict:"E",template:'<a class="weui-cell weui-cell_access" href="javascript:;"><div class="weui-cell__hd" ng-if="!!image"><img ng-src="{{image}}" alt="" style="width:20px;margin-right:5px;display:block"></div><div class="weui-cell__bd weui-cell_primary"><p ng-bind="title"></p></div><span class="weui-cell__ft"></span></a>',replace:!0}})}(),function(){angular.module("ng-weui-popup",[]).directive("weuiPopup",["$document",function(e){return{restrict:"E",scope:!0,replace:!0,template:'<div class="ng-weui-dialog-wrapper hidden" ng-class="className"><div class="weui-dialog"><div class="weui-dialog__hd"><strong class="weui-dialog__title" ng-bind="title"></strong></div><div class="weui-dialog__bd"></div><div class="weui-dialog__ft" ng-show="buttons.length"><a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_default" ng-repeat="button in buttons" ng-click="$buttonTapped(button, $event)" ng-class="button.type || \'button-default\'" ng-bind="button.text"></a></div></div></div>',link:function(t,n){var i=function(e){if(27==e.which){var i=n.data("$ngWeuiPopup");i.responseDeferred.promise.close(),t.$apply()}};t.$on("$destroy",function(){n.remove(),e.unbind("keyup",i)}),e.bind("keyup",i)}}}]).provider("$weuiPopup",function(){var e=this.defaults={cancelText:"取消",cancelType:"weui-dialog__btn_default",okText:"确定",okType:"weui-dialog__btn_primary"};this.$get=["$q","$timeout","$rootScope","$compile","$weuiTemplateLoader","$weuiBackdrop",function(t,n,i,a,o,r){function s(e){e=g({scope:null,title:"",buttons:[]},e||{});var r={};r.scope=(e.scope||i).$new(),r.element=p("<weui-popup></weui-popup>"),r.responseDeferred=t.defer(),a(r.element)(r.scope),r.element.data("$ngWeuiPopup",r),g(r.scope,{title:e.title,buttons:e.buttons,className:e.className,$buttonTapped:function(e,t){var n=(e.onTap||f).apply(r,[t]);t=t.originalEvent||t,t.defaultPrevented||r.responseDeferred.resolve(n)}});var s=e.templateUrl?o.load(e.templateUrl):e.template||e.content||"";return t.when(s).then(function(e){var t=p(r.element[0].querySelector(".weui-dialog__bd"));e?(t.html(e),a(t.contents())(r.scope)):t.remove()}),r.show=function(){r.isShown||r.removed||(r.isShown=!0,r.isShown&&(v.append(r.element),r.element[0].offsetWidth,r.element.addClass("visible active"),w.focusInput(r.element)))},r.hide=function(e){return e=e||f,r.isShown?(r.isShown=!1,r.element.removeClass("active"),void n(e,250,!1)):e()},r.remove=function(){r.removed||(r.hide(function(){r.element.remove(),r.scope.$destroy()}),r.removed=!0)},r}function l(e){function t(){m.push(i),n(i.show,a,!1),i.responseDeferred.promise.then(function(e){var t=m.indexOf(i);return t!==-1&&m.splice(t,1),i.remove(),m.length>0?m[m.length-1].show():(r.release(),r.getElement().removeClass("backdrop-popup"),n(function(){m.length||v.removeClass("ng-weui-popup-open")},400,!1)),e})}var i=b._createPopup(e),a=0;if(m.length>0)a=h.stackPushDelay,n(m[m.length-1].hide,a,!1);else{v.addClass("ng-weui-popup-open"),r.retain();var o=r.getElement();o.addClass("backdrop-popup"),o.off().on("click",function(e){o.hasClass("backdrop-popup")&&i.responseDeferred.promise.close()})}return i.responseDeferred.promise.close=function(e){i.removed||i.responseDeferred.resolve(e)},i.responseDeferred.notify({close:i.responseDeferred.close}),t(),i.responseDeferred.promise}function c(t){return l(g({buttons:[{text:t.okText||e.okText,type:t.okType||e.okType,onTap:function(){return!0}}]},t||{}))}function u(t){return l(g({buttons:[{text:t.cancelText||e.cancelText,type:t.cancelType||e.cancelType,onTap:function(){return!1}},{text:t.okText||e.okText,type:t.okType||e.okType,onTap:function(){return!0}}]},t||{}))}function d(t){var n=i.$new(!0);n.data={},n.data.fieldtype=t.inputType?t.inputType:"text",n.data.response=t.defaultText?t.defaultText:"",n.data.placeholder=t.inputPlaceholder?t.inputPlaceholder:"",n.data.maxlength=t.maxLength?parseInt(t.maxLength):"";var a="";return t.template&&/<[a-z][\s\S]*>/i.test(t.template)===!1&&(a="<span>"+t.template+"</span>",delete t.template),l(g({template:a+'<input class="weui-input" ng-model="data.response" type="{{ data.fieldtype }}"maxlength="{{ data.maxlength }}"placeholder="{{ data.placeholder }}">',scope:n,buttons:[{text:t.cancelText||e.cancelText,type:t.cancelType||e.cancelType,onTap:function(){}},{text:t.okText||e.okText,type:t.okType||e.okType,onTap:function(){return n.data.response||""}}]},t||{}))}var p=angular.element,v=p(document.body),g=angular.extend,f=angular.noop,h=(angular.copy,{stackPushDelay:75}),m=[],w={focusInput:function(e){var t=e[0].querySelector("[autofocus]");t&&t.focus()}},b={show:l,alert:c,confirm:u,prompt:d,_createPopup:s,_popupStack:m};return b}],this.setDefaults=function(t){angular.extend(e,t)}})}(),function(){var e=function(e){function t(){return!0}if(e.indexOf("$getByHandle")>-1)throw new Error("Method '$getByHandle' is implicitly added to each delegate service. Do not list it as a method.");return["$log",function(n){function i(e,t){this._instances=e,this.handle=t}function a(){this._instances=[]}function o(e){return function(){var t,i=this.handle,a=arguments,o=0;return this._instances.forEach(function(n){if((!i||i==n.$$delegateHandle)&&n.$$filterFn(n)){o++;var r=n[e].apply(n,a);1===o&&(t=r)}}),!o&&i?n.warn('Delegate for handle "'+i+'" could not find a corresponding element with delegate-handle="'+i+'"! '+e+"() was not called!\nPossible cause: If you are calling "+e+'() immediately, and your element with delegate-handle="'+i+'" is a child of your controller, then your element may not be compiled yet. Put a $timeout around your call to '+e+"() and try again."):t}}return e.forEach(function(e){i.prototype[e]=o(e)}),a.prototype=i.prototype,a.prototype._registerInstance=function(e,n,i){var a=this._instances;return e.$$delegateHandle=n,e.$$filterFn=i||t,a.push(e),function(){var t=a.indexOf(e);t!==-1&&a.splice(t,1)}},a.prototype.$getByHandle=function(e){return new i(this._instances,e)},new a}]},t=function(e){function t(){if($.offsetWidth){x=E.children,S=x.length,x.length<2&&(e.continuous=!1),y.transitions&&e.continuous&&x.length<3&&(E.appendChild(x[0].cloneNode(!0)),E.appendChild(E.children[1].cloneNode(!0)),x=E.children),_=new Array(x.length),k=$.offsetWidth||$.getBoundingClientRect().width,E.style.width=x.length*k+"px";for(var t=x.length;t--;){var n=x[t];n.style.width=k+"px",n.setAttribute("data-index",t),y.transitions&&(n.style.left=t*-k+"px",r(t,C>t?-k:C<t?k:0,0))}e.continuous&&y.transitions&&(r(a(C-1),-k,0),r(a(C+1),k,0)),y.transitions||(E.style.left=C*-k+"px"),$.style.visibility="visible",e.slidesChanged&&e.slidesChanged()}}function n(t){e.continuous?o(C-1,t):C&&o(C-1,t)}function i(t){e.continuous?o(C+1,t):C<x.length-1&&o(C+1,t)}function a(e){return(x.length+e%x.length)%x.length}function o(t,n){if(C!=t){if(!x)return void(C=t);if(y.transitions){var i=Math.abs(C-t)/(C-t);if(e.continuous){var o=i;i=-_[a(t)]/k,i!==o&&(t=-i*x.length+t)}for(var s=Math.abs(C-t)-1;s--;)r(a((t>C?t:C)-s-1),k*i,0);t=a(t),r(C,k*i,n||T),r(t,0,n||T),e.continuous&&r(a(t-i),-(k*i),0)}else t=a(t),l(C*-k,t*-k,n||T);C=t,b(e.callback&&e.callback(C,x[C]))}}function r(e,t,n){s(e,t,n),_[e]=t}function s(e,t,n){var i=x[e],a=i&&i.style;a&&(a.webkitTransitionDuration=a.MozTransitionDuration=a.msTransitionDuration=a.OTransitionDuration=a.transitionDuration=n+"ms",a.webkitTransform="translate("+t+"px,0)translateZ(0)",a.msTransform=a.MozTransform=a.OTransform="translateX("+t+"px)")}function l(t,n,i){if(!i)return void(E.style.left=n+"px");var a=+new Date,o=setInterval(function(){var r=+new Date-a;return r>i?(E.style.left=n+"px",L&&c(),e.transitionEnd&&e.transitionEnd.call(event,C,x[C]),void clearInterval(o)):void(E.style.left=(n-t)*(Math.floor(r/i*100)/100)+t+"px")},4)}function c(){D=setTimeout(i,L)}function u(){L=e.auto||0,clearTimeout(D)}var d,p,v,g=this;window.navigator.pointerEnabled?(d="pointerdown",p="pointermove",v="pointerup"):window.navigator.msPointerEnabled?(d="MSPointerDown",p="MSPointerMove",v="MSPointerUp"):(d="touchstart",p="touchmove",v="touchend");var f="mousedown",h="mousemove",m="mouseup",w=function(){},b=function(e){setTimeout(e||w,0)},y={addEventListener:!!window.addEventListener,transitions:function(e){var t=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var n in t)if(void 0!==e.style[t[n]])return!0;return!1}(document.createElement("swipe"))},$=e.el;if($){var x,_,k,S,E=$.children[0];e=e||{};var C=parseInt(e.startSlide,10)||0,T=e.speed||300;e.continuous=void 0===e.continuous||e.continuous;var D,B,L=e.auto||0,A={},I={},P={handleEvent:function(n){switch(!n.touches&&n.pageX&&n.pageY&&(n.touches=[{pageX:n.pageX,pageY:n.pageY}]),n.type){case d:this.start(n);break;case f:this.start(n);break;case p:this.touchmove(n);break;case h:this.touchmove(n);break;case v:b(this.end(n));break;case m:b(this.end(n));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":b(this.transitionEnd(n));break;case"resize":b(t)}e.stopPropagation&&n.stopPropagation()},start:function(e){if(e.touches){var t=e.touches[0];A={x:t.pageX,y:t.pageY,time:+new Date},B=void 0,I={},E.addEventListener(p,this,!1),E.addEventListener(h,this,!1),E.addEventListener(v,this,!1),E.addEventListener(m,this,!1),document.addEventListener(v,this,!1),document.addEventListener(m,this,!1)}},touchmove:function(t){if(!(!t.touches||t.touches.length>1||t.scale&&1!==t.scale||g.slideIsDisabled)){e.disableScroll&&t.preventDefault();var n=t.touches[0];I={x:n.pageX-A.x,y:n.pageY-A.y},"undefined"==typeof B&&(B=!!(B||Math.abs(I.x)<Math.abs(I.y))),B||(t.preventDefault(),u(),e.continuous?(s(a(C-1),I.x+_[a(C-1)],0),s(C,I.x+_[C],0),s(a(C+1),I.x+_[a(C+1)],0)):(e.bouncing?I.x=I.x/(!C&&I.x>0||C==x.length-1&&I.x<0?Math.abs(I.x)/k+1:1):(k*C-I.x<0&&(I.x=Math.min(I.x,k*C)),Math.abs(I.x)>k*(x.length-C-1)&&(I.x=Math.max(-k*(x.length-C-1),I.x))),s(C-1,I.x+_[C-1],0),s(C,I.x+_[C],0),s(C+1,I.x+_[C+1],0)),e.onDrag&&e.onDrag())}},end:function(){var t=+new Date-A.time,n=Number(t)<250&&Math.abs(I.x)>20||Math.abs(I.x)>k/2,i=!C&&I.x>0||C==x.length-1&&I.x<0;e.continuous&&(i=!1);var o=I.x<0;B||(n&&!i?(o?(e.continuous?(r(a(C-1),-k,0),r(a(C+2),k,0)):r(C-1,-k,0),r(C,_[C]-k,T),r(a(C+1),_[a(C+1)]-k,T),C=a(C+1)):(e.continuous?(r(a(C+1),k,0),r(a(C-2),-k,0)):r(C+1,k,0),r(C,_[C]+k,T),r(a(C-1),_[a(C-1)]+k,T),C=a(C-1)),e.callback&&e.callback(C,x[C])):e.continuous?(r(a(C-1),-k,T),r(C,0,T),r(a(C+1),k,T)):(r(C-1,-k,T),r(C,0,T),r(C+1,k,T))),E.removeEventListener(p,P,!1),E.removeEventListener(h,P,!1),E.removeEventListener(v,P,!1),E.removeEventListener(m,P,!1),document.removeEventListener(v,P,!1),document.removeEventListener(m,P,!1),e.onDragEnd&&e.onDragEnd()},transitionEnd:function(t){parseInt(t.target.getAttribute("data-index"),10)==C&&(L&&c(),e.transitionEnd&&e.transitionEnd.call(t,C,x[C]))}};this.update=function(){setTimeout(t)},this.setup=function(){t()},this.loop=function(t){return arguments.length&&(e.continuous=!!t),e.continuous},this.enableSlide=function(e){return arguments.length&&(this.slideIsDisabled=!e),!this.slideIsDisabled},this.slide=this.select=function(e,t){u(),o(e,t)},this.prev=this.previous=function(){u(),n()},this.next=function(){u(),i()},this.stop=function(){u()},this.start=function(){c()},this.autoPlay=function(e){!L||L<0?u():(L=e,c())},this.currentIndex=this.selected=function(){return C},this.slidesCount=this.count=function(){return S},this.kill=function(){u(),E.style.width="",E.style.left="",x&&(x=[]),y.addEventListener?(E.removeEventListener(d,P,!1),E.removeEventListener(f,P,!1),E.removeEventListener("webkitTransitionEnd",P,!1),E.removeEventListener("msTransitionEnd",P,!1),E.removeEventListener("oTransitionEnd",P,!1),E.removeEventListener("otransitionend",P,!1),E.removeEventListener("transitionend",P,!1),window.removeEventListener("resize",P,!1)):window.onresize=null},this.load=function(){t(),L&&c(),y.addEventListener?(E.addEventListener(d,P,!1),E.addEventListener(f,P,!1),y.transitions&&(E.addEventListener("webkitTransitionEnd",P,!1),E.addEventListener("msTransitionEnd",P,!1),E.addEventListener("oTransitionEnd",P,!1),E.addEventListener("otransitionend",P,!1),E.addEventListener("transitionend",P,!1)),window.addEventListener("resize",P,!1)):window.onresize=function(){t()}}}};angular.module("ng-weui-slideBox",[]).directive("weuiSlideBox",["$animate","$timeout","$compile","$weuiSlideBoxDelegate","$weuiScrollDelegate",function(e,n,i,a,o){
return{restrict:"E",replace:!0,transclude:!0,scope:{autoPlay:"=",doesContinue:"@",slideInterval:"@",showPager:"@",pagerClick:"&",disableScroll:"@",onSlideChanged:"&",activeSlide:"=?",bounce:"@"},controller:["$scope","$element","$attrs",function(e,i,r){function s(e){e&&!l.isScrollFreeze?o.freezeAllScrolls(e):!e&&l.isScrollFreeze&&o.freezeAllScrolls(!1),l.isScrollFreeze=e}var l=this,c=e.$eval(e.doesContinue)===!0,u=e.$eval(e.bounce)!==!1,d=!!angular.isDefined(r.autoPlay)&&!!e.autoPlay,p=d?e.$eval(e.slideInterval)||4e3:0,v=new t({el:i[0],auto:p,continuous:c,startSlide:e.activeSlide,bouncing:u,slidesChanged:function(){e.currentSlide=v.currentIndex(),n(function(){})},callback:function(t){e.currentSlide=t,e.onSlideChanged({index:e.currentSlide,$index:e.currentSlide}),e.$parent.$broadcast("slideBox.slideChanged",t),e.activeSlide=t,n(function(){})},onDrag:function(){s(!0)},onDragEnd:function(){s(!1)}});v.enableSlide(e.$eval(r.disableScroll)!==!0),e.$watch("activeSlide",function(e){angular.isDefined(e)&&v.slide(e)}),e.$on("slideBox.nextSlide",function(){v.next()}),e.$on("slideBox.prevSlide",function(){v.prev()}),e.$on("slideBox.setSlide",function(e,t){v.slide(t)});var g=a._registerInstance(v,r.delegateHandle,function(){return!0});e.$on("$destroy",function(){g(),v.kill()}),this.slidesCount=function(){return v.slidesCount()},this.onPagerClick=function(t){e.pagerClick({index:t})},n(function(){v.load()})}],template:'<div class="weui-slider"><div class="weui-slider-slides" ng-transclude></div></div>',link:function(t,n,a){function o(){if(!r){var e=t.$new();r=angular.element("<weui-pager></weui-pager>"),n.append(r),r=i(r)(e)}return r}e.enabled(n,!1),angular.isDefined(a.showPager)||(t.showPager=!0,o().toggleClass("hide",!1)),a.$observe("showPager",function(e){void 0!==e&&(e=t.$eval(e),o().toggleClass("hide",!e))});var r}}}]).directive("weuiSlide",function(){return{restrict:"E",require:"?^weuiSlideBox",compile:function(e){e.addClass("weui-slider-slide")}}}).directive("weuiPager",function(){return{restrict:"E",replace:!0,require:"^weuiSlideBox",template:'<div class="weui-slider-pager"><span class="weui-slider-pager-page" ng-repeat="slide in numSlides() track by $index" ng-class="{active: $index == currentSlide}" ng-click="pagerClick($index)"><i class="icon"></i></span></div>',link:function(e,t,n,i){var a=function(e){for(var n=t[0].children,i=n.length,a=0;a<i;a++)a==e?n[a].classList.add("active"):n[a].classList.remove("active")};e.pagerClick=function(e){i.onPagerClick(e)},e.numSlides=function(){return new Array(i.slidesCount())},e.$watch("currentSlide",function(e){a(e)})}}}).service("$weuiSlideBoxDelegate",e(["update","slide","select","enableSlide","previous","next","stop","autoPlay","start","currentIndex","selected","slidesCount","count","loop"])).service("$weuiScrollDelegate",e(["resize","scrollTop","scrollBottom","scrollTo","scrollBy","zoomTo","zoomBy","getScrollPosition","anchorScroll","freezeScroll","freezeAllScrolls","getScrollView"]))}(),function(){angular.module("ng-weui-templateLoader",[]).factory("$weuiTemplateLoader",["$compile","$controller","$http","$q","$rootScope","$templateCache",function(e,t,n,i,a,o){function r(e){return n.get(e,{cache:o}).then(function(e){return e.data&&e.data.trim()})}function s(n){n=angular.extend({template:"",templateUrl:"",scope:null,controller:null,locals:{},appendTo:null},n||{});var o=n.templateUrl?this.load(n.templateUrl):i.when(n.template);return o.then(function(i){var o,r=n.scope||a.$new(),s=angular.element("<div>").html(i).contents();return n.controller&&(o=t(n.controller,angular.extend(n.locals,{$scope:r})),s.children().data("$ngControllerController",o)),n.appendTo&&angular.element(n.appendTo).append(s),e(s)(r),{element:s,scope:r}})}return{load:r,compile:s}}])}(),function(){angular.module("ng-weui-toast",[]).directive("weuiToast",["$document",function(e){return{restrict:"E",scope:!0,replace:!0,template:'<div class="ng-weui-toast-wrapper hidden"><div class="weui-toast"><i class="weui-icon-success-no-circle weui-icon_toast"></i><p class="weui-toast__content" ng-bind="text"></p></div></div>',link:function(e,t){}}}]).provider("$weuiToast",function(){var e=[{type:"success",cls:"ng-weui-toast-success"},{type:"cancel",cls:"ng-weui-toast-cancel"},{type:"forbidden",cls:"ng-weui-toast-forbidden"},{type:"text",cls:"ng-weui-toast-text"}],t=this.defaults={type:"success",timer:1500,text:"已完成",noBackdrop:!0,success:angular.noop};this.$get=["$document","$templateCache","$compile","$q","$http","$rootScope","$timeout","$window","$controller","$weuiBackdrop",function(n,i,a,o,r,s,l,c,u,d){var p=angular.element,v=p(document.body),g=angular.extend,f=angular.noop,h=angular.copy,m={show:function(n){var i=s.$new(!0);g(i,h(t),n||{});var o=i.element=a("<weui-toast></weui-toast>")(i);angular.forEach(e,function(e,t){e.type===i.type&&o.addClass(e.cls)}),v.append(o),i.noBackdrop||(d.retain(),d.getElement().addClass("backdrop-toast")),o.addClass("visible"),o[0].offsetWidth,o.addClass("active"),i.remove=function(e){l(function(){i.noBackdrop||(d.release(),d.getElement().removeClass("backdrop-toast")),o.removeClass("visible active"),o.remove(),i.$destroy(),(e||f)()},i.timer)},i.cancel=function(){i.remove(n.success)},i.cancel()}};return m}],this.setDefaults=function(e){angular.extend(t,e)}})}(),function(){var e=window.ngWeui||(window.ngWeui={}),t=null!=navigator.userAgent.match(/iPad/i),n=null!=navigator.userAgent.match(/iPhone/i),i=null!=navigator.userAgent.match(/Android/i),a=null!=navigator.userAgent.match(/webOS/i),o=null!=navigator.userAgent.match(/micromessenger/i);e.isIpad=t,e.isIPhone=n,e.isAndroid=i,e.isWebOS=a,e.isWechat=o,e.isMobile=t||n||i||a,e.isPC=!e.isMobile,e.version="v0.0.1",angular.module("ng-weui",["ng-weui-actionsheet","ng-weui-backdrop","ng-weui-blur","ng-weui-dialog","ng-weui-fileUpload","ng-weui-gallery","ng-weui-icon","ng-weui-loading","ng-weui-msg","ng-weui-panel","ng-weui-popup","ng-weui-slideBox","ng-weui-templateLoader","ng-weui-toast"])}();